# TodoMind - 思维导图式任务管理工具

## 项目概述

TodoMind 是一款创新的任务管理工具，将思维导图的可视化优势与 GTD (Getting Things Done) 方法论相结合，帮助用户以直观的树形结构组织和管理任务。

**核心理念**: 让任务管理像思考一样自然流畅

- **版本**: v1.0.10
- **技术栈**: React 19 + TypeScript 5.8 + Vite 6
- **代码规模**: 约 3,200 行
- **许可协议**: -

## 主要特性

### 🌲 思维导图式任务管理

- **无限层级**: 支持任意深度的任务分解，将复杂项目拆解为可管理的小任务
- **拖拽重组织**: 轻松调整任务层级和顺序，灵活应对变化
- **展开/折叠**: 专注当前关注的任务分支，避免信息过载
- **可视化关系**: 清晰展示任务之间的父子关系和依赖结构

### ✅ 完整的任务状态管理

支持任务全生命周期管理，涵盖从想法到完成的每个阶段：

- 💡 **想法** (IDEA) - 初步构思，尚未确定执行
- ⭕ **待办** (TODO) - 确定要做，等待开始
- ⚡ **进行中** (IN_PROGRESS) - 正在执行中
- 👁️ **跟踪中** (TRACKING) - 等待他人反馈或外部条件
- ✅ **已完成** (DONE) - 任务完成

### 🎯 优先级标记系统

基于艾森豪威尔矩阵的优先级管理：

- ⭐ **重要** - 对目标有重大影响的任务
- 🔥 **紧急** - 时间敏感，需要尽快处理
- ⭐🔥 **重要且紧急** - 最高优先级，立即处理

### 🔍 强大的筛选功能

#### 基础筛选（互斥）
- **全部任务** - 查看完整的任务树
- **今日任务** - 截止日期为今天的任务
- **已到期** - 未完成但已过截止日期的任务
- **计划中** - 有截止日期但尚未到期的任务

#### 优先级筛选（可多选）
- 重要任务
- 紧急任务
- 重要且紧急任务
- 支持组合筛选，精准定位关注点

#### 视图模式
- **高亮模式** - 显示全部节点，高亮匹配项
- **隐藏模式** - 仅显示筛选结果，聚焦核心
- 实时节点计数，掌握任务数量

### 💾 三层数据持久化

#### 1. LocalStorage - 自动保存
- 5 分钟自动保存间隔
- 浏览器内持久化，无需手动操作

#### 2. IndexedDB - 文件句柄持久化
- 跨会话保持文件关联
- 记住上次打开的文件

#### 3. File System Access API - 跨设备同步
- 直接读写本地文件系统
- 通过云盘（坚果云、Dropbox 等）实现跨设备协作
- 智能同步检测（10 秒轮询）
- 外部文件变更实时通知

### ⌨️ 高效快捷键系统

#### 节点操作
- `Tab` - 添加子节点
- `Enter` - 添加同级节点
- `Delete` / `Backspace` - 删除节点
- `Alt + ↑` / `Alt + ↓` - 上移/下移节点

#### 筛选切换
- `0` - 全部任务
- `1` - 今日任务
- `2` - 已到期任务
- `3` - 计划中任务
- `Z` - 切换重要筛选
- `J` - 切换紧急筛选
- `Q` - 切换重要且紧急筛选

#### 其他
- `Cmd/Ctrl + S` - 保存文件

### 🎨 用户体验优化

- **深色模式** - 支持浅色/深色主题切换
- **锁定功能** - 防止误操作的界面锁定
- **右键菜单** - 快速访问常用操作
- **双击编辑** - 直观的编辑触发方式
- **自动聚焦** - 新建节点自动进入编辑状态
- **中文输入法支持** - 完美兼容中文输入
- **画布操作** - 自由缩放、平移，视图自动居中

## 技术架构

### 核心技术栈

```
前端框架: React 19.2.0
类型系统: TypeScript 5.8.2
构建工具: Vite 6.2.0
样式方案: Tailwind CSS (CDN)
图标库: Lucide React 0.555.0
```

### 项目结构

```
TodoMind/
├── components/               # React 组件
│   ├── MindMapCanvas.tsx    # 思维导图画布（核心可视化）
│   ├── SidebarLeft.tsx      # 左侧边栏（筛选和大纲）
│   ├── SidebarRight.tsx     # 右侧边栏（属性编辑）
│   ├── ContextMenu.tsx      # 右键上下文菜单
│   ├── HelpModal.tsx        # 帮助文档
│   ├── ChangelogModal.tsx   # 版本更新日志
│   └── FilterDropdown.tsx   # 筛选下拉菜单
├── App.tsx                  # 主应用组件（925 行）
├── index.tsx                # 应用入口
├── types.ts                 # TypeScript 类型定义
├── utils.ts                 # 工具函数（树操作、筛选）
├── constants.tsx            # 常量配置
├── indexedDBHelper.ts       # IndexedDB 辅助函数
├── version.ts               # 应用版本号
└── vite.config.ts           # Vite 配置
```

### 核心数据结构

```typescript
interface MindNode {
  id: string;              // 唯一标识
  text: string;            // 节点文本
  status: TaskStatus;      // 任务状态
  isImportant: boolean;    // 重要标记
  isUrgent: boolean;       // 紧急标记
  dueDate?: string;        // 截止日期 (YYYY-MM-DD)
  note?: string;           // 备注
  children: MindNode[];    // 子节点数组
  isExpanded: boolean;     // 展开状态
  createdAt: number;       // 创建时间戳
}
```

### 技术亮点

1. **不可变数据流** - 使用纯函数进行树操作，确保数据一致性
2. **性能优化** - React.memo、useCallback、useMemo 优化渲染
3. **类型安全** - 完整的 TypeScript 类型定义，编译时错误检测
4. **模块化设计** - 组件职责清晰，易于维护和扩展
5. **现代化工具链** - Vite 快速构建，ESNext 模块系统

## 使用场景

### 个人任务管理
- 日常待办事项跟踪
- GTD 工作流实践
- 习惯养成和目标管理

### 项目规划
- 项目任务分解 (WBS)
- 里程碑和交付物管理
- 多线程工作并行跟踪

### 知识管理
- 学习计划制定
- 知识结构梳理
- 阅读笔记组织

### 创意思考
- 头脑风暴
- 想法收集和整理
- 创意项目规划

## 快速开始

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

访问 `http://localhost:3000` 即可使用。

### 生产构建

```bash
npm run build
```

### 预览构建结果

```bash
npm run preview
```

## 使用指南

### 基础操作

1. **创建任务节点**
   - 点击 `Tab` 添加子任务
   - 点击 `Enter` 添加同级任务

2. **编辑任务**
   - 双击节点进入编辑模式
   - 在右侧边栏编辑任务属性（状态、优先级、截止日期、备注）

3. **组织任务**
   - 拖拽节点调整层级和顺序
   - 点击节点前的 ▶ 图标展开/折叠子任务

4. **筛选任务**
   - 左侧边栏选择筛选条件
   - 支持多条件组合筛选
   - 切换视图模式（高亮/隐藏）

### 文件管理

1. **打开文件**
   - 点击顶部 "打开文件" 按钮
   - 选择 `.json` 格式的任务文件

2. **保存文件**
   - 点击 "保存文件" 按钮或使用 `Cmd/Ctrl + S`
   - 首次保存需选择保存位置

3. **跨设备同步**
   - 将任务文件保存在云盘目录（如坚果云、Dropbox）
   - 在其他设备打开同一文件
   - 应用会自动检测外部文件变更并提示重新加载

### 最佳实践

1. **任务分解**: 将大任务拆解为可执行的小任务（2 小时内可完成）
2. **定期回顾**: 每天查看 "今日任务" 和 "已到期" 筛选
3. **优先级管理**: 优先处理 "重要且紧急" 的任务
4. **状态更新**: 及时更新任务状态，保持数据准确性
5. **备注记录**: 在备注中记录关键信息和决策依据

## 设计原则

### 简洁优先
- 界面保持简洁，功能易于发现
- 避免过度设计和不必要的复杂性

### 专注核心
- 优先完善核心功能
- 不追求功能全面，而是追求核心体验优秀

### 用户控制
- 用户完全掌控数据和工作流程
- 数据存储在本地，保护隐私

### 性能为先
- 流畅体验是第一要务
- 优化渲染性能，确保大量节点时依然流畅

## 版本历史

### v1.0.10 (最新)
- 修复筛选后无法缩放和平移的严重 bug
- 优化筛选功能和视图自动居中

### v1.0.09
- 添加快速输入功能
- 优化界面布局

### v1.0.06
- 添加文件信息模态框
- 改进文件元数据追踪

### v1.0.05
- 优化快捷键系统
- 优化优先级筛选功能

## 常见问题

### Q: 数据存储在哪里？是否安全？
A: 数据完全存储在本地（浏览器 LocalStorage 和本地文件系统），不会上传到任何服务器，完全保护隐私。

### Q: 如何实现跨设备同步？
A: 将任务文件保存在云盘目录（如坚果云、Dropbox、OneDrive），在其他设备打开同一文件即可同步。

### Q: 支持哪些浏览器？
A: 推荐使用现代浏览器（Chrome、Edge、Safari），需要支持 File System Access API。

### Q: 可以导出数据吗？
A: 任务文件本身就是标准的 JSON 格式，可以直接打开和编辑，也可以用其他工具处理。

### Q: 节点数量有限制吗？
A: 理论上没有限制，但建议单个文件不超过 1000 个节点以保证性能。

## 贡献指南

欢迎贡献代码、报告 bug 或提出建议。

## 联系方式

- GitHub: [项目仓库链接]
- 问题反馈: [Issues 链接]

## 致谢

感谢所有使用和支持 TodoMind 的用户。

---

**让任务管理像思考一样自然** - TodoMind
