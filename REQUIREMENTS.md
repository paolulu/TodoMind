# TodoMind 产品需求文档

## 1. 产品概述

### 1.1 产品定位
TodoMind 是一款基于思维导图的任务管理工具，旨在帮助用户以更直观的方式组织和管理待办事项。通过可视化的树形结构，用户能够清晰地看到任务之间的层级关系和依赖关系。

### 1.2 核心价值
- **可视化思维**：用图形化方式展示任务结构，符合人脑思维模式
- **灵活组织**：支持无限层级的任务分解，适应复杂项目管理
- **快速操作**：提供便捷的交互方式，降低任务管理成本
- **本地优先**：数据存储在本地，保护隐私且支持离线使用

---

## 2. 核心功能需求

### 2.1 思维导图编辑

#### 2.1.1 节点管理
用户需要能够创建、编辑、删除节点，每个节点代表一个任务或想法。

**基本要求：**
- 支持创建同级节点和子节点
- 节点可以包含文本、状态、优先级等属性
- 支持节点的移动和重新组织
- 支持节点的展开/折叠以管理复杂结构

**交互要求：**
- 提供键盘快捷键支持，提升操作效率
- 支持拖拽操作来调整节点位置和层级关系
- 新建节点后自动获得焦点，方便连续输入

#### 2.1.2 画布操作
用户需要在画布上自由浏览和导航整个思维导图。

**基本要求：**
- 支持画布的缩放（放大/缩小）
- 支持画布的平移（拖拽移动视野）
- 提供视图重置功能，快速回到全局视图
- 画布操作应流畅，不影响用户体验

### 2.2 任务属性管理

#### 2.2.1 任务状态
每个任务需要有明确的状态标识，帮助用户跟踪进度。

**状态类型（建议）：**
- 想法/构思阶段
- 待办/计划执行
- 进行中
- 需要跟踪/等待反馈
- 已完成

**要求：**
- 状态应有明显的视觉区分（颜色、图标等）
- 状态变更应简单快捷
- 不同状态的任务在视觉上应易于识别

#### 2.2.2 优先级标记
用户需要能够标记任务的重要性和紧急程度。

**基本要求：**
- 支持"重要"标记
- 支持"紧急"标记
- 两种标记可以独立设置或组合使用
- 优先级应有清晰的视觉提示

#### 2.2.3 截止日期
用户可以为任务设置截止日期。

**基本要求：**
- 支持日期选择
- 自动识别已过期的任务
- 可以清除截止日期

#### 2.2.4 备注信息
用户可以为任务添加详细描述或补充信息。

**基本要求：**
- 支持多行文本输入
- 备注内容不影响主节点的显示
- 提供查看和编辑备注的便捷方式

### 2.3 筛选与视图

#### 2.3.1 基础筛选
用户需要根据不同维度快速筛选任务。

**筛选维度：**
- 查看全部任务
- 查看今日需要处理的任务（截止日期为今天）
- 查看已到期的任务
- 查看已计划的任务（有截止日期但未到期）
- 根据任务状态筛选

**要求：**
- 筛选应实时生效
- 筛选条件应清晰可见
- 支持快速切换筛选条件

#### 2.3.2 优先级筛选
用户可以根据优先级筛选任务。

**基本要求：**
- 支持筛选"重要"的任务
- 支持筛选"紧急"的任务
- 支持筛选"重要且紧急"的任务
- 支持多个优先级条件的组合筛选

#### 2.3.3 视图模式
提供不同的查看模式以适应不同场景。

**模式选项：**
- 显示全部节点（包括不符合筛选条件的）
- 仅显示符合筛选条件的节点及其父节点路径

**要求：**
- 模式切换应平滑自然
- 用户应清楚当前处于哪种视图模式

### 2.4 快速输入

#### 2.4.1 快速添加
用户需要能够快速记录突发的想法或任务，而无需打断当前的思维流程。

**基本要求：**
- 提供随时可访问的输入入口
- 输入后自动添加到预设的目标节点
- 新添加的节点应有默认的初始状态
- 支持连续快速添加

#### 2.4.2 目标配置
用户可以自定义快速添加的目标位置。

**基本要求：**
- 支持选择任意节点作为快速添加的父节点
- 提供节点搜索功能，方便定位
- 显示节点的完整路径，避免混淆
- 配置应持久化保存

### 2.5 数据持久化

#### 2.5.1 本地存储
所有数据默认保存在浏览器本地存储中。

**基本要求：**
- 数据变更自动保存
- 刷新页面后数据不丢失
- 提供数据重置功能（需确认）

#### 2.5.2 文件系统集成
支持与本地文件系统的双向同步。

**基本要求：**
- 支持将数据导出为 JSON 文件
- 支持从文件加载数据
- 支持保持文件关联，后续保存直接更新文件
- 检测外部文件变更并提示同步
- 刷新页面后保持文件关联

**高级需求：**
- 自动检测文件的外部修改
- 提供同步通知
- 支持跨设备协作（通过云盘同步文件）

### 2.6 界面锁定

用户需要能够锁定界面以防止误操作。

**基本要求：**
- 提供锁定/解锁切换功能
- 锁定后禁止所有编辑操作
- 锁定状态应有明显的视觉提示
- 提供快捷操作来切换锁定状态

---

## 3. 用户体验要求

### 3.1 操作效率
- 常用操作应支持键盘快捷键
- 减少操作步骤，避免繁琐的多步骤流程
- 提供上下文菜单或快捷操作按钮
- 新手用户应能快速上手，提供必要的操作提示

### 3.2 视觉反馈
- 所有交互应有即时的视觉反馈
- 重要状态变更应有明显提示
- 错误操作应有友好的提示信息
- 加载过程应有进度指示

### 3.3 响应性能
- 界面操作应流畅，无明显卡顿
- 大量节点（500+）时仍能保持良好性能
- 动画效果应自然，不影响操作速度

### 3.4 辅助功能
- 提供使用帮助文档
- 提供版本更新日志
- 显示当前打开的文件信息
- 提供必要的状态指示（如自动保存状态）

---

## 4. 技术要求

### 4.1 平台支持
- 支持现代主流浏览器（Chrome、Firefox、Safari、Edge）
- 界面自适应不同屏幕尺寸
- 优先考虑桌面端体验

### 4.2 数据格式
- 使用 JSON 格式存储数据
- 数据结构应清晰、可读、易于维护
- 保证数据的向后兼容性

### 4.3 性能指标
- 初始加载时间 < 2秒
- 常规操作响应时间 < 100ms
- 支持至少 1000 个节点的流畅操作

### 4.4 安全性
- 所有数据存储在用户本地
- 不向服务器传输用户数据
- 文件操作需要用户明确授权

---

## 5. 未来扩展方向（可选）

### 5.1 协作功能
- 多人实时协作编辑
- 评论和讨论功能
- 变更历史追踪

### 5.2 智能功能
- 任务推荐和优先级建议
- 自动识别重复任务
- 时间估算和进度预测

### 5.3 集成能力
- 日历集成
- 第三方任务管理工具同步
- 导出为其他格式（Markdown、PDF等）

### 5.4 移动端
- 移动端适配
- 原生移动应用
- 移动端特定的交互优化

---

## 6. 设计原则

### 6.1 简洁优先
界面应保持简洁，避免过度设计。功能应易于发现和使用，不应让用户感到困惑。

### 6.2 专注核心
优先保证核心功能的完善和流畅，而非追求功能的全面性。

### 6.3 用户控制
用户应完全掌控自己的数据和工作流程，工具应适应用户，而非强制用户适应工具。

### 6.4 性能为先
任何功能和设计都不应以牺牲性能为代价，流畅的体验是第一要务。

---

## 7. 非功能性需求

### 7.1 可维护性
- 代码结构清晰，易于理解和修改
- 组件化设计，便于复用和测试
- 完善的注释和文档

### 7.2 可扩展性
- 架构应支持功能的快速迭代
- 预留扩展点，便于添加新功能
- 避免硬编码，使用配置化设计

### 7.3 兼容性
- 确保旧版本数据能够在新版本中正常使用
- 版本升级时提供数据迁移方案

---

## 8. 成功指标

### 8.1 功能完整性
- 所有核心功能正常工作
- 无阻断性 bug
- 边界情况得到妥善处理

### 8.2 用户体验
- 新用户能在 5 分钟内完成基本操作
- 常规任务管理流程顺畅无阻
- 用户反馈积极正面

### 8.3 性能指标
- 页面加载时间达标
- 操作响应及时
- 大数据量下仍保持流畅

---

## 附录：术语表

- **节点（Node）**：思维导图中的一个元素，代表一个任务、想法或分类
- **画布（Canvas）**：显示思维导图的可视化区域
- **根节点（Root Node）**：思维导图的顶层节点
- **子节点（Child Node）**：某个节点的下级节点
- **同级节点（Sibling Node）**：拥有相同父节点的节点
- **筛选（Filter）**：根据特定条件显示符合要求的节点
- **持久化（Persistence）**：将数据永久保存的过程
